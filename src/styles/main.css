      :root {
        --bg: #121317;
        --bg-alt: #1a1c22;
        --panel: #232630;
        --line: #3f4452;
        --text: #f2f3f8;
        --muted: #b8b3c9;
        --accent: #7c889f;
        --accent-2: #667188;
        --warn: #ffb35a;
        --danger: #ff6f90;
        --ok: #6de2a8;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: "Avenir Next", "Segoe UI", sans-serif;
        color: var(--text);
        background:
          radial-gradient(circle at 12% 8%, #6a738420 0%, transparent 42%),
          radial-gradient(circle at 90% 12%, #8d97aa1a 0%, transparent 34%),
          linear-gradient(160deg, #101116, #171922 62%, #111217);
      }
      .shell {
        max-width: none;
        width: 100%;
        margin: 0;
        padding: 0.45rem 0.55rem;
      }
      .header {
        border: 1px solid var(--line);
        border-radius: 24px;
        padding: 0.8rem 1.1rem;
        background: linear-gradient(180deg, var(--theme-header-a), var(--theme-header-b));
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
        box-shadow: 0 10px 25px #00000040;
      }
      .brand {
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }
      .brand-logo {
        width: 64px;
        height: 64px;
        object-fit: cover;
        background: #000;
        border-radius: 50%;
        overflow: hidden;
        border: 2px solid var(--line);
        box-shadow: 0 6px 16px #00000055;
        display: block;
        filter: hue-rotate(var(--logo-hue, 0deg)) saturate(1.08);
      }
      .brand-dot {
        width: 42px;
        height: 42px;
        border-radius: 999px;
        background: linear-gradient(150deg, #ff2d72, #ff5b5b);
        display: grid;
        place-items: center;
        font-weight: 800;
        font-size: 1.3rem;
        box-shadow: 0 0 0 3px #ffffff14, 0 8px 20px #0000004f;
      }
      .brand-wordmark {
        font-weight: 700;
        letter-spacing: 0.08em;
      }
      .header h1 {
        margin: 0;
        font-size: 1rem;
      }
      .header p {
        margin: 0.18rem 0 0;
        color: var(--muted);
        font-size: 0.8rem;
      }
      .header-links {
        display: flex;
        gap: 1.5rem;
        color: #99a9d7;
        font-weight: 500;
      }
      .header-link-btn {
        border: 0;
        background: transparent;
        padding: 0;
        color: #99a9d7;
        cursor: pointer;
        text-decoration: none;
      }
      .header-link-btn:hover {
        color: #dce7ff;
      }
      .header-link-group {
        position: relative;
        display: inline-flex;
        align-items: center;
        padding-bottom: 0.35rem;
        margin-bottom: -0.35rem;
      }
      .header-dropdown {
        position: absolute;
        top: 100%;
        left: 0;
        min-width: 170px;
        border: 1px solid var(--line);
        border-radius: 10px;
        background: #1d222d;
        box-shadow: 0 10px 24px #00000055;
        padding: 0.25rem;
        display: none;
        z-index: 50;
      }
      .header-link-group:hover .header-dropdown,
      .header-link-group:focus-within .header-dropdown {
        display: grid;
      }
      .header-dropdown a {
        color: #dbe5ff;
        text-decoration: none;
        padding: 0.42rem 0.55rem;
        border-radius: 8px;
        font-size: 0.86rem;
      }
      .header-dropdown a:hover {
        background: #2a3040;
      }
      .header-links .active {
        color: #fff;
        border-bottom: 2px solid var(--accent);
        padding-bottom: 0.2rem;
      }
      .header-actions {
        display: flex;
        gap: 0.4rem;
        align-items: center;
      }
      .action-pill {
        border: 1px solid var(--line);
        border-radius: 12px;
        min-width: 38px;
        height: 38px;
        display: grid;
        place-items: center;
        background: #1d222d;
        color: #dce7ff;
      }
      .save-status {
        font-size: 0.72rem;
        color: var(--muted);
        border: 1px solid var(--line);
        border-radius: 999px;
        padding: 0.18rem 0.52rem;
        white-space: nowrap;
      }
      .plan-mode .detail-only {
        display: none !important;
      }
      button.action-pill {
        cursor: pointer;
      }
      .layout.hide-nav {
        grid-template-columns: 1fr;
      }
      .layout.hide-nav .nav {
        display: none;
      }
      .layout {
        margin-top: 0.8rem;
        display: grid;
        grid-template-columns: 74px minmax(0, 1fr);
        gap: 0.8rem;
        align-items: start;
      }
      .nav {
        border: 1px solid var(--line);
        border-radius: 22px;
        padding: 1rem 0.8rem;
        background: linear-gradient(180deg, var(--theme-surface-a), var(--theme-surface-b) 74%, var(--theme-bg-c));
        display: grid;
        gap: 0.5rem;
        align-content: start;
        box-shadow: inset 0 1px 0 #4053a52e;
        width: 74px;
        overflow: visible;
        position: relative;
        z-index: 35;
      }
      .nav button {
        width: 100%;
        text-align: left;
        border-radius: 12px;
        padding: 0.6rem 0.55rem;
        position: relative;
        overflow: visible;
      }
      .subnav {
        display: grid;
        gap: 0.35rem;
        margin: -0.1rem 0 0.3rem;
        padding-left: 0.4rem;
        max-height: 220px;
        opacity: 1;
        overflow: hidden;
        transition: max-height 220ms ease, opacity 180ms ease, margin 200ms ease;
      }
      .subnav.hidden {
        max-height: 0;
        opacity: 0;
        margin: 0;
      }
      .subnav button {
        font-size: 0.84rem;
        padding: 0.45rem 0.55rem;
        border-style: dashed;
      }
      .nav-btn {
        display: flex;
        align-items: center;
        gap: 0.55rem;
        min-width: 0;
      }
      .nav-icon {
        width: 24px;
        height: 24px;
        border-radius: 8px;
        border: 1px solid var(--theme-line-soft);
        display: inline-grid;
        place-items: center;
        flex: 0 0 auto;
        color: #f2f5ff;
        background: color-mix(in srgb, var(--theme-accent) 18%, #1a1f2a 82%);
        transition: transform 180ms ease, border-color 180ms ease, box-shadow 180ms ease;
      }
      .nav-icon svg {
        width: 15px;
        height: 15px;
        stroke: currentColor;
      }
      .nav-label {
        position: absolute;
        left: calc(100% + 10px);
        top: 50%;
        transform: translateY(-50%);
        white-space: nowrap;
        opacity: 0;
        pointer-events: auto;
        border: 1px solid var(--theme-line-soft);
        border-radius: 10px;
        padding: 0.34rem 0.56rem;
        background: linear-gradient(180deg, var(--theme-card-a), var(--theme-card-b));
        box-shadow: 0 8px 20px #0000004f;
        transition: opacity 140ms ease, transform 140ms ease;
        z-index: 60;
      }
      .nav button:hover .nav-label,
      .nav button:focus-visible .nav-label {
        opacity: 1;
      }
      .nav button:hover .nav-icon,
      .nav button:focus-visible .nav-icon {
        transform: scale(1.6);
        border-color: var(--theme-accent);
        box-shadow: 0 0 0 1px color-mix(in srgb, var(--theme-accent), #000 50%);
      }
      .nav:not(:hover):not(:focus-within) .subnav {
        max-height: 0;
        opacity: 0;
        margin: 0;
        padding-left: 0;
      }
      .nav-main {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .color-picker-wrap {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 44px;
        height: 32px;
        border: 1px solid var(--line-soft, var(--line));
        border-radius: 8px;
        background: linear-gradient(180deg, #343946, #2a2f3a);
      }
      .color-input {
        width: 28px;
        height: 22px;
        border: 0;
        background: transparent;
        padding: 0;
        cursor: pointer;
      }
      .color-input::-webkit-color-swatch-wrapper { padding: 0; }
      .color-input::-webkit-color-swatch {
        border: 1px solid var(--line-soft, var(--line));
        border-radius: 5px;
      }
      .color-tag {
        display: inline-flex;
        align-items: center;
        border: 1px solid var(--line-soft, var(--line));
        border-radius: 999px;
        padding: 0.26rem;
        font-size: 0.72rem;
        color: #dce7ff;
      }
      .color-dot {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        border: 1px solid #cbd7ff55;
      }
      .nav-arrow {
        display: inline-block;
        font-size: 0.7rem;
        color: #9fb1de;
        transition: transform 220ms ease;
      }
      #videoNavBtn.is-open .nav-arrow {
        transform: rotate(180deg);
      }
      .nav:not(:hover):not(:focus-within) .nav-arrow {
        opacity: 0;
      }
      .main {
        border: 1px solid var(--line);
        border-radius: 22px;
        background: linear-gradient(180deg, var(--theme-surface-a), var(--theme-surface-b) 78%);
        padding: 1rem;
        box-shadow: 0 14px 28px #00000035, inset 0 1px 0 #7c64be2c;
        overflow: hidden;
        min-height: calc(100vh - 182px);
      }
      .properties-panel {
        border: 1px solid var(--line);
        border-radius: 22px;
        background: linear-gradient(180deg, var(--theme-surface-a), var(--theme-surface-b) 78%);
        padding: 0.7rem;
        box-shadow: 0 14px 28px #00000035, inset 0 1px 0 #7c64be2c;
        position: sticky;
        top: 0.8rem;
        max-height: calc(100vh - 112px);
        display: grid;
        grid-template-rows: auto auto 1fr;
        gap: 0.55rem;
      }
      .properties-head {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 0.4rem;
      }
      .properties-head .badge {
        border-color: var(--theme-line-soft);
      }
      .property-tabs {
        display: grid;
        grid-template-columns: repeat(6, minmax(0, 1fr));
        gap: 0.35rem;
      }
      .property-tabs button {
        padding: 0.36rem 0.25rem;
        font-size: 0.72rem;
        white-space: nowrap;
      }
      .property-panel-body {
        overflow: auto;
        border: 1px solid var(--theme-line-soft);
        border-radius: 10px;
        padding: 0.5rem;
        background: #171b24;
      }
      .property-row {
        display: grid;
        grid-template-columns: 120px minmax(0, 1fr);
        gap: 0.45rem;
        align-items: center;
        padding: 0.28rem 0;
        border-bottom: 1px solid color-mix(in srgb, var(--theme-line-soft), transparent 50%);
      }
      .property-row:last-child {
        border-bottom: 0;
      }
      .property-key {
        color: var(--muted);
        font-size: 0.75rem;
      }
      .property-val {
        font-size: 0.82rem;
        word-break: break-word;
      }
      .system-status-bar {
        position: fixed;
        left: 0.55rem;
        right: 0.55rem;
        bottom: 0.35rem;
        border: 1px solid var(--theme-line-soft);
        border-radius: 10px;
        background: linear-gradient(180deg, #1a1f29f2, #141923f2);
        padding: 0.35rem 0.6rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 0.7rem;
        z-index: 30;
        backdrop-filter: blur(6px);
      }
      .status-left,
      .status-right {
        display: flex;
        align-items: center;
        gap: 0.65rem;
        min-width: 0;
      }
      .status-pill {
        border: 1px solid var(--theme-line-soft);
        border-radius: 999px;
        padding: 0.12rem 0.48rem;
        font-size: 0.72rem;
        font-weight: 700;
        letter-spacing: 0.02em;
      }
      .status-pill.ready {
        border-color: #1f9e5d;
        color: #7aefb4;
      }
      .status-pill.warn {
        border-color: #b2731b;
        color: #ffc982;
      }
      .status-pill.error {
        border-color: #b73758;
        color: #ff97b1;
      }
      .status-text {
        font-size: 0.76rem;
        color: var(--muted);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 48vw;
      }
      .module {
        display: none;
      }
      .module.active {
        display: block;
      }
      .toolbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 0.8rem;
        margin-bottom: 0.8rem;
        flex-wrap: wrap;
      }
      h2, h3 {
        margin: 0;
      }
      .muted {
        color: var(--muted);
        font-size: 0.86rem;
      }
      .grid {
        display: grid;
        gap: 0.7rem;
      }
      .grid-2 {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
      .grid-3 {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
      .grid-4 {
        grid-template-columns: repeat(4, minmax(0, 1fr));
      }
      .card {
        border: 1px solid var(--line-soft, var(--line));
        border-radius: 14px;
        padding: 0.68rem;
        background: linear-gradient(170deg, var(--theme-card-a), var(--theme-card-b));
        box-shadow: 0 8px 16px #00000030, inset 0 1px 0 #9ba6bf24;
      }
      label {
        display: block;
        font-size: 0.78rem;
        color: var(--muted);
        margin-bottom: 0.2rem;
      }
      input, select, textarea, button {
        font: inherit;
        color: inherit;
      }
      input, select, textarea {
        width: 100%;
        background: var(--theme-input);
        border: 1px solid var(--theme-line-soft);
        border-radius: 8px;
        padding: 0.42rem;
      }
      textarea {
        min-height: 140px;
      }
      button {
        border: 1px solid var(--line-soft, var(--line));
        background: linear-gradient(180deg, #343946, #2a2f3a);
        border-radius: 8px;
        padding: 0.45rem 0.65rem;
        cursor: pointer;
      }
      button.primary, .nav button.active {
        border-color: var(--theme-accent);
        background: linear-gradient(180deg, color-mix(in srgb, var(--theme-accent) 38%, #323846 62%), color-mix(in srgb, var(--theme-accent-2) 52%, #262b36 48%));
      }
      button.warn {
        border-color: var(--warn);
      }
      .table-wrap {
        overflow: auto;
        max-height: 44vh;
        border-radius: 10px;
        border: 1px solid color-mix(in srgb, var(--theme-line-soft), transparent 18%);
        background: #171c25;
      }
      table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        font-size: 0.78rem;
      }
      th, td {
        border: 0;
        border-bottom: 1px solid color-mix(in srgb, var(--theme-line-soft), transparent 34%);
        padding: 0.36rem 0.4rem;
        vertical-align: top;
      }
      tbody tr:nth-child(even) td {
        background: color-mix(in srgb, #202634, transparent 38%);
      }
      tbody tr:hover td {
        background: color-mix(in srgb, var(--theme-accent), #1a1f2a 88%);
      }
      th {
        text-align: left;
        color: var(--muted);
        font-weight: 600;
        position: sticky;
        top: 0;
        background: #212733;
        z-index: 1;
      }
      .kpis {
        display: grid;
        gap: 0.6rem;
        grid-template-columns: repeat(4, minmax(0, 1fr));
      }
      .kpi {
        border: 1px solid var(--line-soft, var(--line));
        border-radius: 10px;
        padding: 0.55rem;
        background: linear-gradient(165deg, #343946, #2a2f3a);
      }
      .kpi b {
        font-size: 1rem;
      }
      .badge {
        display: inline-block;
        font-size: 0.72rem;
        padding: 0.12rem 0.45rem;
        border-radius: 999px;
        border: 1px solid var(--line);
      }
      .ok { color: var(--ok); }
      .warn-t { color: var(--warn); }
      .bad { color: var(--danger); }
      .dropzone {
        border: 1px dashed var(--theme-line-soft);
        border-radius: 10px;
        padding: 0.5rem;
        min-height: 64px;
      }
      .chip {
        display: inline-flex;
        align-items: center;
        gap: 0.3rem;
        border: 1px solid var(--line);
        padding: 0.15rem 0.42rem;
        border-radius: 999px;
        margin: 0.12rem;
        font-size: 0.75rem;
        background: color-mix(in srgb, var(--theme-accent-2), #171b24 72%);
      }
      .fixture-palette-item {
        border: 1px solid var(--theme-line-soft);
        border-radius: 8px;
        padding: 0.45rem;
        margin-bottom: 0.35rem;
        background: linear-gradient(180deg, var(--theme-btn-a), var(--theme-btn-b));
      }
      .fixture-palette-item[draggable="true"] {
        cursor: grab;
      }
      .tabs {
        display: flex;
        gap: 0.4rem;
        flex-wrap: wrap;
        margin-bottom: 0.6rem;
      }
      .tabs button.active {
        border-color: var(--theme-accent);
        background: color-mix(in srgb, var(--theme-accent-2), #151922 66%);
      }
      .venue3d-controls {
        display: grid;
        grid-template-columns: repeat(12, minmax(0, 1fr));
        gap: 0.45rem 0.55rem;
        align-items: end;
        margin-top: 0.4rem;
      }
      .venue3d-control-group {
        grid-column: span 3;
        min-width: 0;
        border: 1px solid var(--theme-line-soft);
        border-radius: 10px;
        padding: 0.32rem 0.42rem 0.38rem;
        background: linear-gradient(170deg, color-mix(in srgb, var(--theme-surface-a), #1a1f2a 35%), color-mix(in srgb, var(--theme-surface-b), #141923 42%));
      }
      .venue3d-control-group.wide {
        grid-column: span 6;
      }
      .venue3d-control-label {
        display: block;
        font-size: 0.72rem;
        color: var(--muted);
        margin-bottom: 0.24rem;
      }
      .venue3d-control-group .tabs {
        margin-bottom: 0;
        gap: 0.28rem;
      }
      .venue3d-control-group .tabs button {
        padding: 0.32rem 0.5rem;
        font-size: 0.8rem;
      }
      .venue3d-control-group select {
        min-height: 33px;
      }
      .venue3d-camera-cluster {
        display: grid;
        grid-template-columns: 1fr;
        gap: 0.45rem 0.55rem;
        align-items: end;
      }
      .venue3d-mini {
        min-width: 0;
      }
      .venue3d-mini-label {
        display: block;
        font-size: 0.68rem;
        color: var(--muted);
        margin-bottom: 0.2rem;
      }
      .venue3d-mini .tabs {
        margin-bottom: 0;
      }
      .venue3d-hints {
        margin-top: 0.36rem;
        display: flex;
        flex-wrap: wrap;
        gap: 0.28rem;
      }
      .venue3d-hints .badge {
        font-size: 0.66rem;
        padding: 0.08rem 0.4rem;
        border-color: color-mix(in srgb, var(--theme-line-soft), #000 20%);
        background: color-mix(in srgb, var(--theme-input), #0f1219 46%);
      }
      .obj-inspector {
        margin-top: 0.65rem;
        border: 1px solid var(--theme-line-soft);
        border-radius: 12px;
        background: linear-gradient(180deg, color-mix(in srgb, var(--theme-card-a), #0e1016 24%), color-mix(in srgb, var(--theme-card-b), #0b0e14 28%));
        overflow: hidden;
      }
      .obj-inspector-head {
        padding: 0.55rem 0.62rem 0.5rem;
        border-bottom: 1px solid color-mix(in srgb, var(--theme-line-soft), transparent 35%);
      }
      .obj-inspector-title {
        font-size: 0.82rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: var(--muted);
      }
      .obj-inspector-name {
        margin-top: 0.12rem;
        font-size: 0.92rem;
        font-weight: 650;
      }
      .obj-inspector-meta {
        margin-top: 0.2rem;
        display: flex;
        flex-wrap: wrap;
        gap: 0.3rem;
      }
      .obj-section {
        padding: 0.52rem 0.62rem;
        border-top: 1px solid color-mix(in srgb, var(--theme-line-soft), transparent 40%);
      }
      .obj-section-label {
        font-size: 0.72rem;
        color: var(--muted);
        margin-bottom: 0.35rem;
      }
      .obj-axis-row {
        display: grid;
        grid-template-columns: 74px repeat(3, minmax(0, 1fr));
        gap: 0.35rem;
        align-items: center;
        margin-bottom: 0.35rem;
      }
      .obj-axis-row:last-child {
        margin-bottom: 0;
      }
      .obj-axis-row > label {
        margin: 0;
        font-size: 0.74rem;
        color: var(--muted);
      }
      .obj-axis-head {
        font-size: 0.68rem;
        color: var(--muted);
        text-align: center;
        padding-bottom: 0.02rem;
      }
      .obj-axis-row input {
        min-height: 32px;
        padding: 0.28rem 0.38rem;
        text-align: center;
      }
      .obj-geometry-grid {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 0.38rem;
      }
      .obj-actions {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0.4rem;
      }
      .outliner {
        margin-top: 0.65rem;
        border: 1px solid var(--theme-line-soft);
        border-radius: 12px;
        background: linear-gradient(180deg, color-mix(in srgb, var(--theme-card-a), #0f1218 26%), color-mix(in srgb, var(--theme-card-b), #0c0f16 30%));
        overflow: hidden;
      }
      .outliner-head {
        padding: 0.5rem 0.62rem;
        font-size: 0.82rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: var(--muted);
        border-bottom: 1px solid color-mix(in srgb, var(--theme-line-soft), transparent 35%);
      }
      .outliner-body {
        padding: 0.24rem 0.3rem 0.35rem;
      }
      .outliner-row {
        display: grid;
        grid-template-columns: 16px 18px minmax(0, 1fr) 24px;
        align-items: center;
        gap: 0.28rem;
        padding: 0.18rem 0.26rem;
        border-radius: 7px;
        min-height: 26px;
      }
      .outliner-row:hover {
        background: color-mix(in srgb, var(--theme-accent), #11151d 88%);
      }
      .outliner-row.active {
        background: color-mix(in srgb, var(--theme-accent), #0f131b 74%);
        box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--theme-accent), #000 42%);
      }
      .outliner-toggle,
      .outliner-eye {
        border: 0;
        background: transparent;
        color: #d9def0;
        width: 100%;
        height: 100%;
        display: inline-grid;
        place-items: center;
        padding: 0;
        cursor: pointer;
      }
      .outliner-toggle.dim {
        opacity: 0.35;
        cursor: default;
      }
      .outliner-label {
        font-size: 0.78rem;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .outliner-group-label {
        font-weight: 620;
      }
      .outliner-row[data-hidden="1"] .outliner-label {
        opacity: 0.55;
      }
      @media (max-width: 1200px) {
        .venue3d-control-group {
          grid-column: span 6;
        }
        .venue3d-control-group.wide {
          grid-column: span 12;
        }
        .venue3d-camera-cluster {
          grid-template-columns: 1fr;
        }
      }
      @media (max-width: 760px) {
        .venue3d-control-group,
        .venue3d-control-group.wide {
          grid-column: span 12;
        }
      }
      .tab-pane {
        display: none;
      }
      .tab-pane.active {
        display: block;
      }
      .sheet-live {
        margin-top: 0.7rem;
      }
      .action-done {
        box-shadow: 0 0 0 2px #6de2a855 inset;
      }
      .toolbar button.secondary {
        border-color: #4f62a8;
        background: #182858;
      }
      .modal-backdrop {
        position: fixed;
        inset: 0;
        background: #050913bd;
        display: none;
        place-items: center;
        z-index: 100;
      }
      .modal-backdrop.open {
        display: grid;
      }
      .modal-card {
        width: min(420px, 92vw);
        border: 1px solid var(--line);
        border-radius: 14px;
        background: linear-gradient(170deg, #252b38, #1d2330);
        box-shadow: 0 18px 36px #00000073;
        padding: 0.85rem;
      }
      .modal-head {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.55rem;
      }
      .modal-actions {
        display: grid;
        gap: 0.5rem;
      }
      /* Department Theme System */
      body[data-dept] {
        --theme-glow-a: #6a738420;
        --theme-glow-b: #8d97aa1a;
        --theme-bg-a: #101116;
        --theme-bg-b: #171922;
        --theme-bg-c: #111217;
        --theme-line: #3f4452;
        --theme-line-soft: #4a5060;
        --theme-surface-a: #24222e;
        --theme-surface-b: #1f1d29;
        --theme-header-a: #282434;
        --theme-header-b: #201d2c;
        --theme-card-a: #2a2736;
        --theme-card-b: #22202d;
        --theme-input: #1b1923;
        --theme-btn-a: #343946;
        --theme-btn-b: #2a2f3a;
        --theme-accent: #7c889f;
        --theme-accent-2: #667188;
        --logo-hue: 0deg;
      }
      body[data-dept="Video"] {
        --theme-glow-a: #49c96a36;
        --theme-glow-b: #2e954842;
        --theme-bg-a: #0f1511;
        --theme-bg-b: #161f19;
        --theme-bg-c: #101611;
        --theme-line: #3f8d55;
        --theme-line-soft: #356f45;
        --theme-surface-a: #1d2b21;
        --theme-surface-b: #17231b;
        --theme-header-a: #213326;
        --theme-header-b: #1b281f;
        --theme-card-a: #243328;
        --theme-card-b: #1c2a20;
        --theme-input: #162118;
        --theme-btn-a: #2d4a35;
        --theme-btn-b: #23392a;
        --theme-accent: #57b36a;
        --theme-accent-2: #3e8f53;
        --logo-hue: -150deg;
      }
      body[data-dept="Sound"] {
        --theme-glow-a: #5f8eff38;
        --theme-glow-b: #3f6be242;
        --theme-bg-a: #0f121b;
        --theme-bg-b: #151a27;
        --theme-bg-c: #101520;
        --theme-line: #3b62c6;
        --theme-line-soft: #324ea0;
        --theme-surface-a: #1c2236;
        --theme-surface-b: #171d2d;
        --theme-header-a: #212944;
        --theme-header-b: #1a2137;
        --theme-card-a: #232b42;
        --theme-card-b: #1c2438;
        --theme-input: #151b2b;
        --theme-btn-a: #2b3760;
        --theme-btn-b: #212b4e;
        --theme-accent: #4f82ff;
        --theme-accent-2: #3a66d4;
        --logo-hue: -35deg;
      }
      body[data-dept="Lighting"] {
        --theme-glow-a: #ff5c5c34;
        --theme-glow-b: #d9474740;
        --theme-bg-a: #191011;
        --theme-bg-b: #241517;
        --theme-bg-c: #180f10;
        --theme-line: #b73c3c;
        --theme-line-soft: #8f3232;
        --theme-surface-a: #2f1f22;
        --theme-surface-b: #24181a;
        --theme-header-a: #3a2326;
        --theme-header-b: #2b1b1d;
        --theme-card-a: #352328;
        --theme-card-b: #291b1f;
        --theme-input: #221619;
        --theme-btn-a: #5a2b33;
        --theme-btn-b: #432127;
        --theme-accent: #e25555;
        --theme-accent-2: #c63f3f;
        --logo-hue: 90deg;
      }
      body[data-dept="Power"] {
        --theme-glow-a: #a06bff38;
        --theme-glow-b: #7a50d842;
        --theme-bg-a: #121017;
        --theme-bg-b: #1b1625;
        --theme-bg-c: #13101b;
        --theme-line: #6946bf;
        --theme-line-soft: #53379b;
        --theme-surface-a: #262036;
        --theme-surface-b: #1f1a2d;
        --theme-header-a: #2f2744;
        --theme-header-b: #241f34;
        --theme-card-a: #2e2642;
        --theme-card-b: #241d35;
        --theme-input: #1a1626;
        --theme-btn-a: #3f2d67;
        --theme-btn-b: #31234f;
        --theme-accent: #8b5cff;
        --theme-accent-2: #6e46c7;
        --logo-hue: 0deg;
      }
      body[data-dept="Rigging"] {
        --theme-glow-a: #ff944434;
        --theme-glow-b: #d86a2338;
        --theme-bg-a: #1a120d;
        --theme-bg-b: #25170f;
        --theme-bg-c: #1a120d;
        --theme-line: #bf6a2a;
        --theme-line-soft: #9c5723;
        --theme-surface-a: #321f14;
        --theme-surface-b: #26180f;
        --theme-header-a: #3b2517;
        --theme-header-b: #2c1b11;
        --theme-card-a: #382216;
        --theme-card-b: #2a1a10;
        --theme-input: #24160e;
        --theme-btn-a: #6d3f1f;
        --theme-btn-b: #522f17;
        --theme-accent: #f08a3c;
        --theme-accent-2: #c96a27;
        --logo-hue: 120deg;
      }
      body[data-dept="Venue"] {
        --theme-glow-a: #3fd6c238;
        --theme-glow-b: #2aa89b3a;
        --theme-bg-a: #0d1515;
        --theme-bg-b: #13201f;
        --theme-bg-c: #0f1717;
        --theme-line: #2e9a8f;
        --theme-line-soft: #257d75;
        --theme-surface-a: #1a2a29;
        --theme-surface-b: #152220;
        --theme-header-a: #1f3230;
        --theme-header-b: #182826;
        --theme-card-a: #1f312f;
        --theme-card-b: #182724;
        --theme-input: #14211f;
        --theme-btn-a: #20564f;
        --theme-btn-b: #18443e;
        --theme-accent: #35bdb0;
        --theme-accent-2: #299b90;
        --logo-hue: -100deg;
      }
      /* Keep base UI neutral; only lines/highlights change by department */
      body[data-dept] {
        --theme-glow-a: #6a738420;
        --theme-glow-b: #8d97aa1a;
        --theme-bg-a: #101116;
        --theme-bg-b: #171922;
        --theme-bg-c: #111217;
        --theme-surface-a: #252932;
        --theme-surface-b: #20242c;
        --theme-header-a: #2b3039;
        --theme-header-b: #232831;
        --theme-card-a: #303640;
        --theme-card-b: #282e38;
        --theme-input: #1b1923;
        --theme-btn-a: #343946;
        --theme-btn-b: #2a2f3a;
      }
      body[data-dept] {
        background:
          radial-gradient(circle at 12% 8%, var(--theme-glow-a) 0%, transparent 42%),
          radial-gradient(circle at 90% 12%, var(--theme-glow-b) 0%, transparent 34%),
          linear-gradient(160deg, var(--theme-bg-a), var(--theme-bg-b) 62%, var(--theme-bg-c));
      }
      body[data-dept] .header {
        border-color: var(--theme-line);
        background: linear-gradient(180deg, var(--theme-header-a), var(--theme-header-b));
      }
      body[data-dept] .nav,
      body[data-dept] .main {
        border-color: var(--theme-line);
      }
      body[data-dept] .nav {
        background: linear-gradient(180deg, var(--theme-surface-a), var(--theme-surface-b) 74%, var(--theme-bg-c));
      }
      body[data-dept] .main {
        background: linear-gradient(180deg, var(--theme-surface-a), var(--theme-surface-b) 78%);
      }
      body[data-dept] .card,
      body[data-dept] .kpi {
        border-color: var(--theme-line-soft);
        background: linear-gradient(170deg, var(--theme-card-a), var(--theme-card-b));
      }
      body[data-dept] input,
      body[data-dept] select,
      body[data-dept] textarea {
        background: var(--theme-input);
        border-color: var(--theme-line-soft);
      }
      body[data-dept] button {
        border-color: var(--theme-line-soft);
        background: linear-gradient(180deg, var(--theme-btn-a), var(--theme-btn-b));
      }
      body[data-dept] .dropzone {
        border-color: color-mix(in srgb, var(--theme-accent), #ffffff 18%);
      }
      body[data-dept] .chip {
        border-color: color-mix(in srgb, var(--theme-accent), #ffffff 14%);
        background: color-mix(in srgb, var(--theme-accent-2), #11131a 72%);
      }
      body[data-dept] .save-status,
      body[data-dept] .action-pill,
      body[data-dept] th,
      body[data-dept] td {
        border-color: var(--theme-line-soft);
      }
      body[data-dept] th {
        background: color-mix(in srgb, var(--theme-accent-2), #0f1220 72%);
      }
      body[data-dept] .header-links .active {
        border-bottom-color: var(--theme-accent);
      }
      body[data-dept] .nav button.active,
      body[data-dept] button.primary,
      body[data-dept] .tabs button.active {
        border-color: color-mix(in srgb, var(--theme-accent), #ffffff 18%);
        background: linear-gradient(180deg, color-mix(in srgb, var(--theme-accent), #2a2f46 38%), color-mix(in srgb, var(--theme-accent-2), #22263a 52%));
      }
      @media (max-width: 1100px) {
        .layout {
          grid-template-columns: 74px 1fr;
        }
        .properties-panel {
          display: none;
        }
        .nav {
          width: 64px;
        }
      }
      @media (max-width: 1320px) {
        .grid-3, .grid-4 {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
      }
      @media (max-width: 820px) {
        .grid-2, .grid-3, .grid-4, .kpis {
          grid-template-columns: 1fr;
        }
        .layout {
          grid-template-columns: 1fr;
        }
        .nav {
          width: 100%;
          grid-template-columns: repeat(3, minmax(0, 1fr));
        }
        .nav .nav-label {
          position: static;
          transform: none;
          opacity: 1;
          pointer-events: auto;
          border: 0;
          box-shadow: none;
          padding: 0;
          background: transparent;
        }
        .nav .nav-arrow {
          opacity: 1;
        }
        .header {
          flex-direction: column;
          align-items: flex-start;
        }
        .header-links {
          width: 100%;
          overflow-x: auto;
        }
      }
